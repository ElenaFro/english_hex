import{_ as P,e as l,i as N,l as M,y as W,B as H,G as z,c as p,o as i,h as V,b as t,A as R,f as O,F as j,s as q,t as G,j as B,d as k,p as Q,H as f,q as J}from"./index-Bnwhgc4X.js";import{u as K}from"./categories-BmjotiV0.js";import{u as X}from"./games-D45rkMOD.js";import{L as Y}from"./Loader-KkIMPZBx.js";import{_ as F}from"./star-CJTtr_lZ.js";import{_ as w}from"./arrow_icon-DATKZ57T.js";import{_ as t2}from"./girl_head-D3IPlkvH.js";const e2="/assets/%D0%BC%D0%B5%D1%82%D0%B5%D0%BE%D1%80_small-C6hZzOGo.png",s2="/assets/%D0%9F%D0%BB%D0%B0%D0%BD%D0%B5%D1%82%D1%8B_big-C1zT2dAL.png",a2="data:image/svg+xml,%3csvg%20width='61'%20height='56'%20viewBox='0%200%2061%2056'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M32.9575%200.226395C32.6599%200.35635%2028.3576%203.50414%2023.3787%207.22951L14.3141%2013.9872H9.82232C6.11527%2013.9872%205.19528%2014.0305%204.58646%2014.2182C2.58411%2014.8391%200.879409%2016.644%200.257058%2018.7666C0.0135294%2019.5897%200%2020.1961%200%2027.849C0%2035.5019%200.0135294%2036.1083%200.257058%2036.9314C0.879409%2039.054%202.58411%2040.8589%204.58646%2041.4798C5.19528%2041.6675%206.11527%2041.7108%209.82232%2041.7108H14.3141L23.3923%2048.4829C28.3711%2052.2083%2032.7275%2055.3705%2033.0658%2055.5005C33.9181%2055.847%2035.8258%2055.746%2036.6105%2055.3272C37.3411%2054.9085%2038.2069%2053.9699%2038.5858%2053.1469L38.8969%2052.4682V27.849V3.22979L38.5858%202.55114C38.2069%201.7281%2037.3411%200.789532%2036.6105%200.370789C35.8528%20-0.0479546%2033.7287%20-0.13459%2032.9575%200.226395ZM34.6081%2039.415L34.5675%2050.9665L25.9493%2044.5265L17.3176%2038.0865V27.849V17.6115L25.9493%2011.1715L34.5675%204.73149L34.6081%2016.283C34.6217%2022.6508%2034.6217%2033.0472%2034.6081%2039.415ZM12.9882%2027.8634V37.1047L9.51115%2037.0613C6.27763%2037.018%205.97998%2036.9892%205.54704%2036.7148C4.89763%2036.3105%204.49175%2035.6318%204.39705%2034.7366C4.35646%2034.3179%204.3294%2030.9246%204.35646%2027.1992C4.39705%2020.7159%204.41057%2020.3838%204.66763%2019.9218C5.00587%2019.3153%205.50645%2018.8966%206.10175%2018.7522C6.3588%2018.6944%208.00939%2018.6367%209.78173%2018.6222L12.9882%2018.6078V27.8634Z'%20fill='%23262060'/%3e%3cpath%20d='M48.7332%204.99117C48.4897%205.12112%2048.165%205.40991%2048.0026%205.65538C47.6914%206.11745%2047.5291%207.22928%2047.6779%207.86462C47.732%208.08121%2048.3679%208.91869%2049.085%209.71286C50.7355%2011.5467%2051.3173%2012.2975%2052.2644%2013.8425C53.8744%2016.4849%2055.1055%2019.6761%2055.7685%2022.9394C56.0391%2024.2678%2056.0661%2024.8598%2056.0661%2027.8488C56.0661%2030.8377%2056.0391%2031.4297%2055.7685%2032.7582C55.1055%2036.0215%2053.8744%2039.2126%2052.2644%2041.855C51.3173%2043.4145%2050.722%2044.1798%2049.1661%2045.898C47.8403%2047.3564%2047.6238%2047.7318%2047.6238%2048.6704C47.6238%2050.3165%2049.2879%2051.4283%2050.7761%2050.7497C51.3173%2050.5042%2053.7932%2047.804%2054.8214%2046.3312C57.9332%2041.9128%2059.8408%2036.859%2060.4767%2031.4586C60.6526%2029.8847%2060.6526%2025.8128%2060.4767%2024.2389C59.8408%2018.8386%2057.9873%2013.9292%2054.9026%209.48183C53.9555%208.11008%2051.385%205.25108%2050.8438%204.94785C50.3567%204.6735%2049.2879%204.70238%2048.7332%204.99117Z'%20fill='%23262060'/%3e%3cpath%20d='M44.741%2014.3335C43.6857%2014.7522%2043.2122%2015.6041%2043.3204%2016.8748C43.3881%2017.5968%2043.4422%2017.6978%2044.6463%2019.2284C45.5934%2020.4269%2046.554%2022.3473%2047.0275%2024.0223C47.3792%2025.2352%2047.4063%2025.4951%2047.4063%2027.8488C47.4063%2030.2024%2047.3792%2030.4623%2047.0275%2031.6752C46.554%2033.3502%2045.5934%2035.2706%2044.6463%2036.4691C43.4422%2037.9997%2043.3881%2038.1007%2043.3204%2038.8227C43.1987%2040.1367%2043.794%2041.1041%2044.9169%2041.4218C45.7828%2041.6673%2046.4728%2041.4218%2047.2981%2040.541C49.4492%2038.274%2051.1675%2034.6064%2051.7492%2031.0832C52.0063%2029.466%2052.0063%2026.2315%2051.7492%2024.6143C51.3028%2021.9142%2050.2339%2019.1995%2048.7457%2016.9903C47.9204%2015.763%2046.5404%2014.2757%2046.2292%2014.2757C46.121%2014.2757%2045.864%2014.2468%2045.6475%2014.2035C45.431%2014.1602%2045.0251%2014.2179%2044.741%2014.3335Z'%20fill='%23262060'/%3e%3c/svg%3e",o2={class:"relative all"},l2={key:1},n2={class:"page-container"},r2={key:0,class:"page-container__button"},c2=["onClick","disabled"],u2={__name:"AttackPlanetGame",emits:["update:lives","update:earnedStars","switch-component"],setup(g,{emit:d}){const s=l(null),r=W(),n=N().getCurrentUser(),e=d,c=l(5),v=l(n.rating),A=l(K().chosedCategory),u=M(()=>A.value.is||r.query.id),C=l(!1),U=()=>{if(s.value){const o=`http://62.109.0.225:8000/storage/categories/${u.value}/cards/${m.value.id}/audio/${m.value.audio}`;s.value.src=o,s.value.currentTime=0,s.value.play(),C.value=!0}},I=()=>{C.value=!0;const o=m.value;y(o,!1)},b=l(0),_=l([]),S=l({}),y=(o,a=!1)=>{o.options.forEach((h,x)=>{S.value[x]={backgroundColor:"#fff",color:"#262060",border:a?"2px solid rgba(118, 118, 118, 0.3)":"2px solid rgba(49, 29, 93, 1)"}})},m=M(()=>_.value[b.value]||{}),E=o=>{const a=m.value;y(a),o===a.correctAnswer?(S.value[a.options.indexOf(o)]={backgroundColor:"#31AF40",color:"#FFFFFF",border:"none"},setTimeout(Z,1e3)):(S.value[a.options.indexOf(o)]={backgroundColor:"#881717",color:"#FFFFFF",border:"none"},c.value--,D.value=`calc(${D.value} + 2vh)`,L.value=`${parseInt(L.value)+4}px`,$.value=`${parseInt($.value)+6}px`,e("update:lives",c.value),e("update:earnedStars",v.value),c.value<=0&&e("switch-component","AttackPlanetLoss"))},Z=()=>{const o=m.value;y(o,!0),C.value=!1,c.value>0&&b.value<_.value.length-1?b.value++:c.value===5&&b.value>=_.value.length-1?(v.value+=50,localStorage.setItem("earnedStars",v.value),e("update:earnedStars",v.value),e("switch-component","AttackPlanetWin")):c.value>0&&c.value<5&&b.value>=_.value.length-1?(v.value+=50-5*(5-c.value),localStorage.setItem("earnedStars",v.value),e("switch-component","AttackPlanetResult")):c.value<=0&&e("switch-component","AttackPlanetLoss")},D=l("-25px"),L=l("-4px"),$=l("74px");return H(async()=>{if(s.value&&s.value.addEventListener("ended",I),!A.value)return;const o=await X().fetchDataForPlanetAttack(u.value);_.value=o.map(a=>({id:a.id,audio:a.audio,correctAnswer:a.correctAnswer,options:a.options}))}),z(()=>{s.value&&s.value.removeEventListener("ended",I)}),(o,a)=>(i(),p("div",o2,[_.value.length?(i(),p("section",l2,[t("img",{src:e2,alt:"meteor",class:"meteor",style:R({top:D.value,right:L.value,width:$.value})},null,4),t("section",n2,[a[1]||(a[1]=t("section",{class:"image-section_game"},[t("div",{class:"image-container"},[t("img",{src:s2,alt:"planet",class:"planet"})])],-1)),t("button",{class:"page-container__game",onClick:U},a[0]||(a[0]=[t("p",{class:"question"},"?",-1),t("img",{src:a2,alt:"sound",class:"sound1"},null,-1)])),t("audio",{ref_key:"soundRef",ref:s},null,512),m.value.options?(i(),p("section",r2,[(i(!0),p(j,null,q(m.value.options,(h,x)=>(i(),p("div",{class:"line",key:x},[t("button",{class:"answer-button",style:R(S.value[x]),onClick:L2=>E(h),disabled:!C.value},G(h),13,c2)]))),128))])):O("",!0)])])):(i(),V(Y,{key:0,class:"loader"}))]))}},T=P(u2,[["__scopeId","data-v-1c240edd"]]),i2="/assets/girl_fly-CNM73C9d.png",d2={class:"relative all"},p2={class:"page-container"},v2={class:"page-container__result"},m2={class:"container-result"},_2={class:"result-stars"},g2={class:"result-add-star"},C2={__name:"AttackPlanetResult",props:["lives"],setup(g){const d=B(),s=()=>{d.push("/")},r=()=>{window.location.reload()};return(n,e)=>(i(),p("div",d2,[t("section",p2,[t("section",v2,[e[4]||(e[4]=t("p",{class:"result-title"},"Планета спасена, но с трудностями.",-1)),e[5]||(e[5]=t("p",{class:"text-result"},"Были допущены ошибки, но атака остановлена. Хороший результат — есть к чему стремиться.",-1)),t("div",m2,[e[1]||(e[1]=t("p",{class:"result-title_left"},"Награда:",-1)),t("div",_2,[t("p",g2,G(50-5*(5-g.lives)),1),e[0]||(e[0]=t("img",{src:F,class:"result-star",alt:"Звезда"},null,-1))])]),t("div",{class:"buttons"},[t("button",{class:"button button--purple",onClick:r},e[2]||(e[2]=[k(" Пройти еще раз "),t("img",{src:w,alt:"arrow"},null,-1)])),t("button",{class:"button button--purple d-mt-12",onClick:s},e[3]||(e[3]=[k(" Дальше "),t("img",{src:w,alt:"arrow"},null,-1)]))])])]),e[6]||(e[6]=t("img",{src:i2,alt:"Di",class:"avatar_result"},null,-1))]))}},b2=P(C2,[["__scopeId","data-v-7f0e58d2"]]),f2={class:"relative all"},k2={__name:"AttackPlanetLoss",setup(g){const d=B(),s=()=>{d.push("/")},r=()=>{window.location.reload()};return(n,e)=>(i(),p("div",f2,[t("section",{class:"page-container"},[t("section",{class:"page-container__result"},[e[2]||(e[2]=Q('<p class="result-title" data-v-4ca7c7d4>Планета уничтожена.</p><p class="text-result" data-v-4ca7c7d4>Миссия провалена - метеорит достиг цели. Но это еще не конец. Попробуйте снова и улучшите результат!</p><div class="container-result" data-v-4ca7c7d4><p class="result-title_left" data-v-4ca7c7d4>Награда:</p><div class="result-stars" data-v-4ca7c7d4><p class="result-add-star" data-v-4ca7c7d4> +0</p><img src="'+F+'" class="result-star" alt="Звезда" data-v-4ca7c7d4></div></div>',3)),t("div",{class:"buttons"},[t("button",{class:"button button--purple",onClick:r},e[0]||(e[0]=[k(" Пройти еще раз "),t("img",{src:w,alt:"arrow"},null,-1)])),t("button",{class:"button button--purple d-mt-12",onClick:s},e[1]||(e[1]=[k(" Дальше "),t("img",{src:w,alt:"arrow"},null,-1)]))])])]),e[3]||(e[3]=t("img",{src:t2,alt:"Di",class:"avatar_result"},null,-1))]))}},w2=P(k2,[["__scopeId","data-v-4ca7c7d4"]]),P2="/assets/girl_fly_win-CBiuPI9H.png",A2={class:"relative all"},S2={__name:"AttackPlanetWin",setup(g){const d=B(),s=()=>{d.push("/")};return(r,n)=>(i(),p("div",A2,[t("section",{class:"page-container"},[t("section",{class:"page-container__result"},[n[1]||(n[1]=Q('<p class="result-title" data-v-eeb32b81>Планета спасена!</p><p class="text-result" data-v-eeb32b81>Все ответы даны правильно. Защитная операция прошла идеально. </p><div class="container-result" data-v-eeb32b81><p class="result-title_left" data-v-eeb32b81>Награда:</p><div class="result-stars" data-v-eeb32b81><p class="result-add-star" data-v-eeb32b81> +50</p><img src="'+F+'" class="result-star" alt="Звезда" data-v-eeb32b81></div></div>',3)),t("div",{class:"buttons"},[t("button",{class:"button button--purple d-mt-12",onClick:s},n[0]||(n[0]=[k(" Дальше "),t("img",{src:w,alt:"arrow"},null,-1)]))])])]),n[2]||(n[2]=t("img",{src:P2,alt:"Di",class:"avatar_result"},null,-1))]))}},x2=P(S2,[["__scopeId","data-v-eeb32b81"]]),y2={class:""},D2={__name:"PlanetAttackPage",emits:["update:lives","update:earnedStars","switch-component"],setup(g,{emit:d}){const s=d,r=l(f(T)),n=l(5),e=l(parseInt(localStorage.getItem("earnedStars"))||0);function c(u){switch(u){case"AttackPlanetResult":r.value=f(b2);break;case"AttackPlanetLoss":r.value=f(w2);break;case"AttackPlanetWin":r.value=f(x2);break;default:r.value=f(T);break}}const v=u=>{n.value=u,s("update:lives",u)},A=u=>{e.value=u,s("update:earnedStars",u)};return(u,C)=>(i(),p("div",y2,[(i(),V(J(r.value),{onSwitchComponent:c,lives:n.value,earnedStars:e.value,"onUpdate:lives":v,"onUpdate:earnedStars":A},null,40,["lives","earnedStars"]))]))}},T2=P(D2,[["__scopeId","data-v-fe7647da"]]);export{T2 as default};
