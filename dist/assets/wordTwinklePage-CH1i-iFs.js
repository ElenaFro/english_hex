import{_ as w,c as o,o as n,b as s,d as C,j as S,y as F,e as r,l as I,B as $,f,a as h,n as x,F as k,s as E,t as T,w as W,I as D,h as P}from"./index-DGq2-exO.js";import{_ as L}from"./girl-img2-WSyhBb8Y.js";import{_ as j}from"./girl-img-gMVZ8VJa.js";import{u as z}from"./games-DBjNGE6i.js";import{u as M}from"./categories-BBGCsgPD.js";const O={class:"page-content"},Q={class:"content-container"},H={class:"content-container-inner"},J={__name:"wordTwinkleStart",emits:["start"],setup(m){return(a,e)=>(n(),o("div",O,[s("div",Q,[s("div",H,[e[1]||(e[1]=s("h1",{class:"page-content__name-game"},"Мерцание слов",-1)),e[2]||(e[2]=s("p",{class:"page-content__short-describe-game"}," Внимание и визуальная память - ключ к успеху! ",-1)),e[3]||(e[3]=s("p",{class:"page-content__describe-game"},[C(" На экране появится изображение - его нужно внимательно рассмотреть за 4 секунды. Затем картинка исчезнет и откроется вопрос с четырьмя вариантами ответа на английском языке. Нужно выбрать правильный вариант. При ошибке добавляется 1 секунда ко времени. Готовы? "),s("br"),C(" Начинаем! ")],-1)),s("button",{class:"button button--blue",onClick:e[0]||(e[0]=i=>a.$emit("start"))},"Начать")]),e[4]||(e[4]=s("div",{class:"img-container"},[s("img",{src:L,alt:"",class:"img-container__girl-img"})],-1))])]))}},K=w(J,[["__scopeId","data-v-95797c1c"]]),X=["src"],Y={__name:"ImgPage",props:{src:{type:String,default:""}},setup(m){return(a,e)=>(n(),o("img",{src:m.src,alt:"card_image"},null,8,X))}},Z={},ee={class:"answers-card"};function se(m,a){return n(),o("div",ee,a[0]||(a[0]=[s("p",{class:"answers-card__question-mark"},"?",-1),s("div",{class:"img-container"},[s("img",{class:"girl-img",src:j,alt:""})],-1)]))}const te=w(Z,[["render",se],["__scopeId","data-v-f4c21956"]]),ae={class:"flip-card__inner"},re={class:"flip-card__side flip-card__front"},ne={class:"flip-card__side flip-card__back"},oe={key:0,class:"answer-container"},ce=["onClick","disabled"],ie={__name:"wordTwinkleGameComponent",emits:["wrong-answer","game-finished"],setup(m,{emit:a}){const e=S(),i=F(),l=r("ImgPage"),_=r(!1),v=r([]),g=r(0),c=r([]),p=r(0),y=r(null),b=I(()=>{var t;return((t=M().chosedCategory)==null?void 0:t.id)||i.query.id}),G=a,d=I(()=>{const t=v.value[g.value]||{};return{id:t.id||null,image:`http://62.109.0.225:8000/storage/categories/${b.value}/cards/${t.id}/image/${t.image}`,correctAnswer:t.correctAnswer||"",options:t.options||[]}});$(async()=>{try{v.value=await z().getWordForTwinkleGame(b.value)}catch(t){console.error("Error fetching game data:",t)}setTimeout(A,4e3)});const A=()=>{l.value="AnswersPage",setTimeout(()=>{q()},800)},q=()=>{l.value==="AnswersPage"&&(_.value=!0)},B=t=>{c.value.includes(t)||c.value.push(t),t!==d.value.correctAnswer&&(p.value++,G("wrong-answer",1)),t===d.value.correctAnswer&&setTimeout(()=>{N()},1e3)},N=async()=>{g.value<v.value.length-1?(g.value+=1,c.value=[],_.value=!1,l.value="ImgPage",setTimeout(A,4e3)):(await V(),y.value===!0?R():e.push({name:"myPlanet"}))},V=async()=>{try{await useUserStore().fetchUser(),y.value=useUserStore().getCurrentUser().ever_played_game}catch(t){console.error("Error checking first game:",t)}},R=()=>{G("game-finished"),e.push({name:"gameResult",query:{wrong:p.value,from:"wordTwinkle"}})};return(t,we)=>(n(),o(k,null,[s("div",{class:x(["flip-card",{flipped:l.value==="AnswersPage"}])},[s("div",ae,[s("div",re,[h(Y,{src:d.value.image},null,8,["src"])]),s("div",ne,[h(te)])])],2),_.value?(n(),o("div",oe,[(n(!0),o(k,null,E(d.value.options,(u,U)=>(n(),o("button",{key:U,onClick:pe=>B(u),disabled:c.value.includes(u),class:x(["button button--white",c.value.includes(u)&&u!==d.value.correctAnswer?"button--wrong":"",c.value.includes(u)&&u===d.value.correctAnswer?"button--correct":""])},T(u),11,ce))),128))])):f("",!0)],64))}},le=w(ie,[["__scopeId","data-v-2b7911b5"]]),ue={class:"page-content"},me={class:"timer-container"},_e={class:"timer-container__timer"},de={class:"scroll-container"},ve={__name:"wordTwinkleGame",setup(m){S();const a=r(0),e=r(0),i=r(!1),l=()=>{setInterval(()=>{a.value++},1e3)},_=()=>{e.value++,e!==0&&(i.value=!0)};$(()=>{l()});const v=()=>{g()},g=()=>a.value+e.value;return(c,p)=>(n(),o("div",ue,[s("div",me,[s("p",_e,T(a.value)+" сек",1),W(s("p",{class:"timer-container__timer-wrong"},"+ "+T(e.value)+" сек",513),[[D,i.value]])]),s("div",de,[h(le,{onWrongAnswer:_,onGameFinished:v})])]))}},ge=w(ve,[["__scopeId","data-v-8f3c879d"]]),ye={__name:"wordTwinklePage",setup(m){const a=F(),e=r("startGame"),i=()=>{e.value="wordTwinkleGame"};return $(()=>{a.query.startGame==="true"&&(e.value="wordTwinkleGame")}),(l,_)=>(n(),o(k,null,[e.value==="startGame"?(n(),P(K,{key:0,onStart:i})):f("",!0),e.value==="wordTwinkleGame"?(n(),P(ge,{key:1})):f("",!0)],64))}};export{ye as default};
